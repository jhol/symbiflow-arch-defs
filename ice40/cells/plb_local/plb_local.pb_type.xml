<!-- set: ai sw=1 ts=1 sta et -->
<!-- A diagram for the iCE40 PLB "Logic Cell" is shown in;
      http://www.latticesemi.com/~/media/LatticeSemi/Documents/DataSheets/iCE/iCE40LPHXFamilyDataSheet.pdf
      Architecture iCE40 LP/HX Family Data Sheet
       * Figure 2-2. PLB Block Diagram

     It is 8 x (SB_CARRY + SB_LUT4 + FF)
  -->
<pb_type name="PLB_LOCAL" num_pb="1" xmlns:xi="http://www.w3.org/2001/XInclude">
 <!-- SB_LUT4 inputs -->
 <input  name="I0"     num_pins="4" equivalent="false"/>
 <input  name="I1"     num_pins="4" equivalent="false"/>
 <input  name="I2"     num_pins="4" equivalent="false"/>
 <input  name="I3"     num_pins="4" equivalent="false"/>
 <input  name="I4"     num_pins="4" equivalent="false"/>
 <input  name="I5"     num_pins="4" equivalent="false"/>
 <input  name="I6"     num_pins="4" equivalent="false"/>
 <input  name="I7"     num_pins="4" equivalent="false"/>

 <!-- D flip-flop outputs -->
 <output name="O0"     num_pins="1" equivalent="false"/>
 <output name="O1"     num_pins="1" equivalent="false"/>
 <output name="O2"     num_pins="1" equivalent="false"/>
 <output name="O3"     num_pins="1" equivalent="false"/>
 <output name="O4"     num_pins="1" equivalent="false"/>
 <output name="O5"     num_pins="1" equivalent="false"/>
 <output name="O6"     num_pins="1" equivalent="false"/>
 <output name="O7"     num_pins="1" equivalent="false"/>

 <output name="FCOUT0" num_pins="1" equivalent="false"/>
 <output name="FCOUT1" num_pins="1" equivalent="false"/>
 <output name="FCOUT2" num_pins="1" equivalent="false"/>
 <output name="FCOUT3" num_pins="1" equivalent="false"/>
 <output name="FCOUT4" num_pins="1" equivalent="false"/>
 <output name="FCOUT5" num_pins="1" equivalent="false"/>
 <output name="FCOUT6" num_pins="1" equivalent="false"/>
 <output name="FCOUT7" num_pins="1" equivalent="false"/>

 <!-- D flip-flop controls -->
 <clock  name="CLK"    num_pins="1" equivalent="false"/>
 <input  name="EN"     num_pins="1" equivalent="false"/>
 <input  name="SR"     num_pins="1" equivalent="false"/>

 <!-- Carry chain -->
 <input  name="FCIN"   num_pins="1" equivalent="false"/>
 <output name="FCOUT"  num_pins="1" equivalent="false"/>

 <mode name="dff">
  <pb_type name="BLK_IG-LUTFF" num_pb="8">
   <xi:include href="../lutff/lutff.ports.xml" xpointer="xpointer(ports/child::node())"/>
   <xi:include href="../../primitives/sb_lut/sb_lut.pb_type.xml"/>
   <xi:include href="../../primitives/sb_ff/dff.pb_type.xml"/>
   <xi:include href="../../primitives/sb_carry/sb_carry.pb_type.xml"/>
   <xi:include href="../lutff/lutff.interconnect.xml"/>
  </pb_type>

  <xi:include href="plb_local.interconnect.xml"/>
 </mode>

 <mode name="dffe">
  <pb_type name="BLK_IG-LUTFF" num_pb="8">
   <xi:include href="../lutff/lutff.ports.xml" xpointer="xpointer(ports/child::node())"/>
   <xi:include href="../../primitives/sb_lut/sb_lut.pb_type.xml"/>
   <xi:include href="../../primitives/sb_ff/dffe.pb_type.xml"/>
   <xi:include href="../../primitives/sb_carry/sb_carry.pb_type.xml"/>
   <xi:include href="../lutff/lutff.interconnect.xml"/>
  </pb_type>

  <xi:include href="plb_local.interconnect.xml"/>
 </mode>

 <mode name="dffs">
  <pb_type name="BLK_IG-LUTFF" num_pb="8">
   <xi:include href="../lutff/lutff.ports.xml" xpointer="xpointer(ports/child::node())"/>
   <xi:include href="../../primitives/sb_lut/sb_lut.pb_type.xml"/>
   <xi:include href="../../primitives/sb_ff/dffs.pb_type.xml"/>
   <xi:include href="../../primitives/sb_carry/sb_carry.pb_type.xml"/>
   <xi:include href="../lutff/lutff.interconnect.xml"/>
  </pb_type>

  <xi:include href="plb_local.interconnect.xml"/>
 </mode>

 <mode name="dffes">
  <pb_type name="BLK_IG-LUTFF" num_pb="8">
   <xi:include href="../lutff/lutff.ports.xml" xpointer="xpointer(ports/child::node())"/>
   <xi:include href="../../primitives/sb_lut/sb_lut.pb_type.xml"/>
   <xi:include href="../../primitives/sb_ff/dffes.pb_type.xml"/>
   <xi:include href="../../primitives/sb_carry/sb_carry.pb_type.xml"/>
   <xi:include href="../lutff/lutff.interconnect.xml"/>
  </pb_type>

  <xi:include href="plb_local.interconnect.xml"/>
 </mode>

</pb_type>
